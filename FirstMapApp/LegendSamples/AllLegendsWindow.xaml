<Window x:Class="FirstMapApp.LegendSamples.AllLegendsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:maptor="clr-namespace:IRI.Maptor.Jab.Controls.View;assembly=IRI.Maptor.Jab.Controls" 
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:local="clr-namespace:FirstMapApp.LegendSamples"
        mc:Ignorable="d"
        Loaded="Window_Loaded" Title="Sample Maptor App (All Legends)" Height="700" Width="900">
    <Window.Resources>
        <Style TargetType="{x:Type Button}" BasedOn="{StaticResource flatButtonPrimary}">
            <Setter Property="Margin" Value="4"/>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
            <!--<RowDefinition Height="{Binding ElementName=attributeExpander, Path=ActualHeight}"/>-->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="350"/>
        </Grid.ColumnDefinitions>

        <maptor:MapViewer Margin="0" Grid.ColumnSpan="3"  x:Name="map"/>
        <GridSplitter Grid.Column="1" Width="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" 
             ResizeBehavior="PreviousAndNext" ShowsPreview="True"/>

        <Border HorizontalAlignment="Stretch" BorderThickness="1" BorderBrush="LightGray" Margin="0,5" Padding="5" Grid.Column="2"
              Background="{StaticResource MahApps.Brushes.Accent}"
              Visibility="{Binding IsTocShown, Converter={StaticResource boolToVisibilityConverter}}" >
            <DockPanel>
                <Expander Header="BaseMaps" DockPanel.Dock="Top" IsExpanded="True"  Margin="0,1,0,0" Cursor="Hand">
                    <StackPanel>
                        <DockPanel Background="#DDFFFFFF" LastChildFill="True">
                            <TextBlock Text="Base map opacity" VerticalAlignment="Center" Margin="2"/>
                            <TextBlock DockPanel.Dock="Right" Text="{Binding BaseMapOpacity, StringFormat=N2, FallbackValue=0}" Margin="4" VerticalAlignment="Center"/>
                            <Slider Margin="4" Minimum="0" Maximum="1" LargeChange="0.2" Value="{Binding BaseMapOpacity}" TickPlacement="Both" TickFrequency=".1" IsSnapToTickEnabled="True"/>
                        </DockPanel>
                        <ComboBox ItemsSource="{Binding MapProviders}" SelectedItem="{Binding SelectedMapProvider, Mode=TwoWay}" 
                                VerticalAlignment="Center" DisplayMemberPath="Title" Margin="0,4"/>
                    </StackPanel>
                </Expander>
                <Expander Header="Drawing Legend" DockPanel.Dock="Top" IsExpanded="True"  Margin="0,1,0,0" Cursor="Hand">
                    <maptor:MapDrawingLegendView MinHeight="90"/>
                </Expander>
                <Expander Header="Layer Legend" DockPanel.Dock="Top" IsExpanded="True" Margin="0,1,0,0" Cursor="Hand">
                    <maptor:MapLegendWithOptionsView EnableFilterMode="True" Layers="{Binding Layers}" GroupName="B"/>
                </Expander>
            </DockPanel>
        </Border>

        <Expander Header="Draw" HorizontalAlignment="Left" Margin="4" IsExpanded="True" Background="White" VerticalAlignment="Top" Opacity="1">
            <StackPanel>
                <Button Command="{Binding DrawPointCommand}" ToolTip="Draw point"  >
                    <iconPacks:Modern Kind="LocationCircle"/>
                </Button>
                <Button Command="{Binding DrawPolylineCommand}" ToolTip="Draw polyline">
                    <iconPacks:Modern Kind="VectorLine"/>
                </Button>
                <Button Command="{Binding DrawPolygonCommand}" ToolTip="Draw polygon">
                    <iconPacks:Modern Kind="VectorPolygon"/>
                </Button>
                <Button Command="{Binding AddTextToMapCommand}" ToolTip="Add text to map">
                    <iconPacks:Modern Kind="TextSerif"/>
                </Button>
            </StackPanel>
        </Expander>

    </Grid>
</Window>
